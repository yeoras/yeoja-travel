<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YEOJA - ì—¬í–‰ì ê²¬ì  ìë™í™” ì‹œìŠ¤í…œ</title>
    
    <!-- 1. í…Œì¼ìœˆë“œ CSS (ë””ìì¸) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. ë¦¬ì•¡íŠ¸ & ë°”ë²¨ (ì‹¤í–‰ ì—”ì§„) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 3. í°íŠ¸ì–´ì¸ ì•„ì´ì½˜ (ê°€ì¥ ì•ˆì •ì ì¸ ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 4. í°íŠ¸ (Juaì²´) -->
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

    <style>
        * { font-family: 'Jua', sans-serif; }
        .soft-shadow { box-shadow: 0 8px 24px rgba(149, 157, 165, 0.1); }
        .btn-press:active { transform: scale(0.98); }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .animate-pop { animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .input-base { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #EEE; background-color: #FAFAFA; font-size: 14px; outline: none; transition: all 0.2s; }
        .input-base:focus { border-color: #FB923C; background-color: #FFF; }
        
        /* ì•„ì´ì½˜ ë˜í¼ ìŠ¤íƒ€ì¼ */
        .icon-wrapper { display: inline-flex; align-items: center; justify-content: center; }
    </style>
</head>
<body class="bg-[#F9F5F0]">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // =========================================================================
        // ğŸ› ï¸ [ì•„ì´ì½˜ ë³µêµ¬ í‚¤íŠ¸] ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ ì•„ì´ì½˜ì„ ì§ì ‘ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤!
        // =========================================================================
        const Icon = ({ name, className }) => <i className={`fa-solid ${name} ${className} icon-wrapper`}></i>;

        const Plane = (p) => <Icon name="fa-plane" {...p} />;
        const Hotel = (p) => <Icon name="fa-hotel" {...p} />;
        const MapIcon = (p) => <Icon name="fa-map-location-dot" {...p} />;
        const Coffee = (p) => <Icon name="fa-mug-hot" {...p} />;
        const Calculator = (p) => <Icon name="fa-calculator" {...p} />;
        const Search = (p) => <Icon name="fa-magnifying-glass" {...p} />;
        const User = (p) => <Icon name="fa-user" {...p} />;
        const Heart = (p) => <Icon name="fa-heart" {...p} />;
        const Users = (p) => <Icon name="fa-users" {...p} />;
        const Briefcase = (p) => <Icon name="fa-briefcase" {...p} />;
        const ChevronRight = (p) => <Icon name="fa-chevron-right" {...p} />;
        const ArrowLeft = (p) => <Icon name="fa-arrow-left" {...p} />;
        const RotateCcw = (p) => <Icon name="fa-rotate-left" {...p} />;
        const Star = (p) => <Icon name="fa-star" {...p} />;
        const Sparkles = (p) => <Icon name="fa-wand-magic-sparkles" {...p} />;
        const Smile = (p) => <Icon name="fa-face-smile" {...p} />;
        const Sun = (p) => <Icon name="fa-sun" {...p} />;
        const MessageSquare = (p) => <Icon name="fa-comment" {...p} />;
        const DollarSign = (p) => <Icon name="fa-dollar-sign" {...p} />;
        const X = (p) => <Icon name="fa-xmark" {...p} />;
        const Send = (p) => <Icon name="fa-paper-plane" {...p} />;
        const Share2 = (p) => <Icon name="fa-share-nodes" {...p} />;
        const Copy = (p) => <Icon name="fa-copy" {...p} />;
        const LogIn = (p) => <Icon name="fa-right-to-bracket" {...p} />;
        const CheckCircle = (p) => <Icon name="fa-circle-check" {...p} />;
        const AlertCircle = (p) => <Icon name="fa-circle-exclamation" {...p} />;
        const PlayCircle = (p) => <Icon name="fa-circle-play" {...p} />;
        const Gift = (p) => <Icon name="fa-gift" {...p} />;

        // =========================================================================
        // ğŸš« [í´ë¦°ë´‡] ê¸ˆì§€ì–´ ë¦¬ìŠ¤íŠ¸
        // =========================================================================
        const BANNED_WORDS = ['ê¹¡íŒ¨', 'ë°”ë³´', 'ë©ì²­ì´', 'ì‹œë°œ', 'ë³‘ì‹ ', 'ê°œìƒˆë¼', 'ì§€ë„', 'ë†ˆ', 'ë…„', 'ì£½ì–´', 'ì‚¬ê¸°', "ëŠê¸ˆ", "ë‹ˆì• ë¯¸", "ëŠê¸ˆë§ˆ", "ëŠê¸ˆë§ˆë’¤ì§", "ë‹ˆì• ë¹„", "ë‹ˆì—„ë§ˆ", "ë‹ˆì—„ë§ˆë’¤ì§",
"ë³‘ì‹ ", "ë¸…ì‹ ", "ã…‚ã……", "ì¥ì• ì¸", "ì§€ë„", "ì§€ëŸ´", "ã…ˆã„¹", "êº¼ì ¸",
"ë‹¥ì³", "ì´ìƒˆë¼", "ì €ìƒˆë¼", "ê°œìƒˆë¼", "ê°œìƒˆ", "ìƒˆë¼", "ã……ã…‚",
"ì‹œë°œ", "ì”¨ë°œ", "ì”¨íŒ”", "ìŠˆë°œ", "ì‹œë²Œ", "ì‹œë°”", "ã…†ã…‚",
"ê°œë¯¸ì¹œ", "ë¯¸ì¹œë†ˆ", "ë¯¸ì¹œë…„", "ë¯¸ì¹œ", "ë˜ë¼ì´", "ë˜ë¼ì´ìƒˆë¼",
"ì •ì‹ ë³‘ì", "ì‹¸ì´ì½”", "ì‚¬ì´ì½”", "ë³€íƒœ", "ì“°ë ˆê¸°", "ì“°ë ‰",
"í•œì‹¬", "ì°ë”°", "ì°", "ê¸‰ì‹ì¶©", "ê¸‰ì‹", "ê¸‰ì‹ìƒˆë¼", "ì¼ë¯¼ì´",
"ì¼ë¯¼", "ë…¸ì¼", "í•µë…¸ì¼", "ì£½ì–´", "ë’¤ì ¸", "ë’¤ì§", "ë””ì ¸",
"ì‚´ì¸", "ìì‚´", "ì£½ì´ê¸°", "í…ŒëŸ¬", "í˜‘ë°•",
"ê°œë…¸ë‹µ", "ë…¸ë‹µ", "í•µë…¸ë‹µ", "ê°œëª»í•¨", "ë‡Œì—†ìŒ", "ë‡Œì ˆ",
"í˜ì˜¤", "í˜", "ì—­ê²¹", "í† ë‚˜ì™€", "ê·¹í˜",
"ì¡´ë‚˜", "ì¡¸ë¼", "ì¡´ë‚˜ê²Œ", "ê°œê°™ë„¤", "ê°œê°™ë‹¤", "Xê°™ë‹¤",
"fuck", "fucking", "shit", "bitch", "asshole", "bastard",
"retard", "loser", "trash", "scum", "idiot", "stupid",
"sex", "porn", "porno", "ì•¼ë™", "í¬ë¥´ë…¸", "ì„¹ìŠ¤", "ì•¼ì‚¬",
"19ê¸ˆ", "AV", "ì•¼ìº ", "ìœ ë‘", "ê°€ìŠ´", "ë…¸ì¶œ",
"ë„ë°•", "ë¶ˆë²•", "í•´í‚¹", "í•µ", "ì¹˜íŠ¸", "ì¹˜íŒ…",
"ì‚¬ê¸°", "ë¨¹íŠ€", "ë’·ëˆ", "ë¶ˆë²•ê´‘ê³ ", "ìŠ¤íŒ¸",
"ìš´ì˜ìì£½ì–´", "ê´€ë¦¬ìì£½ì–´", "í…ŒëŸ¬í•¨", "ì¹¼ë“¤ê³ "
];

        // =========================================================================
        // ğŸ“¢ [ì‚¬ì¥ë‹˜ ì „ìš© ê´€ë¦¬ ê³µê°„] 
        // =========================================================================
        const WEEKLY_RANKING_DATA = {
            family: [
                { name: 'ë‚˜íŠ¸ë‘ (ë² íŠ¸ë‚¨)', tag: 'ê°€ì¡±ì—¬í–‰ ì„±ì§€' },
                { name: 'ê´Œ (ë¯¸êµ­)', tag: 'ì‡¼í•‘+íœ´ì–‘ ê¿€ì¡°í•©' },
                { name: 'ì œì£¼ë„ (í•œêµ­)', tag: 'ë´„ê½ƒ ì—¬í–‰ ì‹œì¦Œ' }
            ],
            couple: [
                { name: 'ë°œë¦¬ (ì¸ë„ë„¤ì‹œì•„)', tag: 'ì‹ í˜¼ì—¬í–‰ 1ìœ„' },
                { name: 'êµí†  (ì¼ë³¸)', tag: 'ê°ì„± ê³¨ëª©ê¸¸ ë°ì´íŠ¸' },
                { name: 'íŒŒë¦¬ (í”„ë‘ìŠ¤)', tag: 'ë‚­ë§Œì˜ ë„ì‹œ' }
            ],
            solo: [
                { name: 'ì¹˜ì•™ë§ˆì´ (íƒœêµ­)', tag: 'í•œë‹¬ì‚´ê¸° ì„±ì§€' },
                { name: 'ë„ì¿„ (ì¼ë³¸)', tag: 'í˜¼ë°¥/ë•ì§ˆ ìµœê³ ' },
                { name: 'ë¦¬ìŠ¤ë³¸ (í¬ë¥´íˆ¬ê°ˆ)', tag: 'ìœ ëŸ½ ê°ì„± ë‚­ë‚­' }
            ]
        };

        const CITIES_DB = {
            'bali': { name: 'ë°œë¦¬ (ì¸ë„ë„¤ì‹œì•„)', flight: 650000, hostel: 15000, airbnb: 50000, hotel: 120000, food: 15000, coffee: 4000 },
            'chiangmai': { name: 'ì¹˜ì•™ë§ˆì´ (íƒœêµ­)', flight: 450000, hostel: 12000, airbnb: 40000, hotel: 90000, food: 8000, coffee: 3000 },
            'bangkok': { name: 'ë°©ì½• (íƒœêµ­)', flight: 400000, hostel: 15000, airbnb: 45000, hotel: 100000, food: 10000, coffee: 3500 },
            'danang': { name: 'ë‹¤ë‚­ (ë² íŠ¸ë‚¨)', flight: 350000, hostel: 10000, airbnb: 45000, hotel: 100000, food: 7000, coffee: 2500 },
            'nha_trang': { name: 'ë‚˜íŠ¸ë‘ (ë² íŠ¸ë‚¨)', flight: 380000, hostel: 12000, airbnb: 50000, hotel: 110000, food: 8000, coffee: 3000 },
            'cebu': { name: 'ì„¸ë¶€ (í•„ë¦¬í•€)', flight: 350000, hostel: 15000, airbnb: 55000, hotel: 130000, food: 10000, coffee: 3500 },
            'singapore': { name: 'ì‹±ê°€í¬ë¥´', flight: 500000, hostel: 45000, airbnb: 120000, hotel: 200000, food: 30000, coffee: 6000 },
            'tokyo': { name: 'ë„ì¿„ (ì¼ë³¸)', flight: 400000, hostel: 40000, airbnb: 100000, hotel: 150000, food: 25000, coffee: 5000 },
            'osaka': { name: 'ì˜¤ì‚¬ì¹´ (ì¼ë³¸)', flight: 350000, hostel: 35000, airbnb: 90000, hotel: 130000, food: 22000, coffee: 4500 },
            'fukuoka': { name: 'í›„ì¿ ì˜¤ì¹´ (ì¼ë³¸)', flight: 250000, hostel: 30000, airbnb: 80000, hotel: 110000, food: 20000, coffee: 4000 },
            'taipei': { name: 'íƒ€ì´ë² ì´ (ëŒ€ë§Œ)', flight: 350000, hostel: 25000, airbnb: 70000, hotel: 120000, food: 15000, coffee: 4000 },
            'jeju': { name: 'ì œì£¼ë„ (í•œêµ­)', flight: 100000, hostel: 25000, airbnb: 80000, hotel: 150000, food: 20000, coffee: 5000 },
            'paris': { name: 'íŒŒë¦¬ (í”„ë‘ìŠ¤)', flight: 1200000, hostel: 60000, airbnb: 150000, hotel: 250000, food: 40000, coffee: 7000 },
            'london': { name: 'ëŸ°ë˜ (ì˜êµ­)', flight: 1300000, hostel: 70000, airbnb: 180000, hotel: 300000, food: 45000, coffee: 8000 },
            'barcelona': { name: 'ë°”ë¥´ì…€ë¡œë‚˜ (ìŠ¤í˜ì¸)', flight: 1100000, hostel: 50000, airbnb: 130000, hotel: 200000, food: 35000, coffee: 5000 },
            'guam': { name: 'ê´Œ (ë¯¸êµ­)', flight: 500000, hostel: 60000, airbnb: 150000, hotel: 250000, food: 35000, coffee: 6000 },
            'nyc': { name: 'ë‰´ìš• (ë¯¸êµ­)', flight: 1600000, hostel: 100000, airbnb: 250000, hotel: 400000, food: 50000, coffee: 9000 },
        };

        const TRAVEL_TYPES = {
            'emotional': { title: 'ê°ì„± ì¶©ë§Œ ì—¬í–‰ëŸ¬ ğŸ“¸', desc: 'ë‚¨ëŠ” ê±´ ì‚¬ì§„ë¿! \nì¸ìƒìƒ· ê±´ì§€ëŠ”ê²Œ ì œì¼ ì¤‘ìš”í•´', icon: <Heart className="w-10 h-10 text-rose-400" /> },
            'activity': { title: 'ì—ë„ˆìì´ì € ì•¡í‹°ë¹„í‹°ëŸ¬ ğŸ„â€â™‚ï¸', desc: 'ê°€ë§Œíˆ ìˆìœ¼ë©´ ëª¸ì‚´ ë‚˜! \nì„œí•‘, ë“±ì‚°, ë‹¤ì´ë¹™ ê³ ê³ !', icon: <Sun className="w-10 h-10 text-amber-500" /> },
            'healing': { title: 'ì¹¨ëŒ€ì™€ í•œëª¸ íë§ëŸ¬ ğŸ›Œ', desc: 'ê´€ê´‘ì§€? ê·€ì°®ì•„... \ní˜¸ìº‰ìŠ¤í•˜ë©° ë©ë•Œë¦¬ëŠ”ê²Œ ìµœê³ ì•¼', icon: <Coffee className="w-10 h-10 text-stone-500" /> },
            'foodie': { title: 'ì©ì©ë°•ì‚¬ ë¨¹ë°©ëŸ¬ ğŸ–', desc: 'ì—¬í–‰ = ë¨¹ëŠ” ê²ƒ. \në§›ì§‘ ì§€ë„ë¶€í„° ì¼œëŠ” ë‹¹ì‹ !', icon: <Users className="w-10 h-10 text-orange-400" /> },
        };

        function App() {
            const [currentPage, setCurrentPage] = useState('home');
            const [userPoints, setUserPoints] = useState(() => {
                const saved = localStorage.getItem('yeoja_points');
                return saved ? parseInt(saved, 10) : 0;
            });
            const [isLoginModalOpen, setIsLoginModalOpen] = useState(false);
            const [isAdModalOpen, setIsAdModalOpen] = useState(false);
            const [user, setUser] = useState(() => {
                // ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
                const sessionUser = sessionStorage.getItem('yeoja_current_user');
                return sessionUser ? JSON.parse(sessionUser) : null;
            });

            useEffect(() => {
                localStorage.setItem('yeoja_points', userPoints);
            }, [userPoints]);

            // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì²˜ë¦¬
            const handleLoginSuccess = (userData) => {
                setUser(userData);
                sessionStorage.setItem('yeoja_current_user', JSON.stringify(userData));
                setIsLoginModalOpen(false);
            };

            const handleLogout = () => {
                setUser(null);
                sessionStorage.removeItem('yeoja_current_user');
            };

            return (
                <div className="min-h-screen bg-[#F9F5F0] text-[#5A5A5A] font-sans flex flex-col items-center selection:bg-orange-200">
                    {isLoginModalOpen && (
                        <LoginModal 
                            onClose={() => setIsLoginModalOpen(false)} 
                            onLogin={handleLoginSuccess} 
                        />
                    )}

                    {isAdModalOpen && (
                        <AdModal 
                            onClose={() => setIsAdModalOpen(false)}
                            onReward={() => {
                                setUserPoints(prev => prev + 300);
                                setIsAdModalOpen(false);
                            }}
                        />
                    )}

                    <header className="w-full max-w-6xl px-6 py-6 flex justify-between items-center sticky top-0 bg-[#F9F5F0]/90 backdrop-blur-sm z-40">
                        <div className="flex items-center gap-3 cursor-pointer group" onClick={() => setCurrentPage('home')}>
                            <div className="bg-orange-400 text-white p-2.5 rounded-2xl shadow-sm transform group-hover:rotate-12 transition duration-300">
                                <Plane className="w-6 h-6" />
                            </div>
                            <h1 className="text-3xl text-[#4A4A4A] tracking-wider group-hover:text-orange-500 transition">YEOJA</h1>
                        </div>
                        
                        <div className="flex items-center gap-4">
                            <div className="flex items-center gap-2 bg-white px-4 py-2 rounded-full border border-orange-200 shadow-sm">
                                <div className="w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center text-white text-xs font-bold">$</div>
                                <span className="text-orange-500 font-bold">{userPoints.toLocaleString()} P</span>
                            </div>
                            
                            {user ? (
                                <div className="hidden md:flex items-center gap-2 text-sm font-medium text-[#555] bg-white border border-[#E0E0E0] px-4 py-2 rounded-full shadow-sm">
                                    <User className="w-4 h-4 text-orange-400" />
                                    <span>{user.name}ë‹˜</span>
                                    <button onClick={handleLogout} className="text-xs text-[#AAA] ml-2 hover:text-red-400">(ë¡œê·¸ì•„ì›ƒ)</button>
                                </div>
                            ) : (
                                <div onClick={() => setIsLoginModalOpen(true)} className="hidden md:flex items-center gap-2 text-sm font-medium text-[#7A7A7A] bg-white border border-[#E0E0E0] px-5 py-2 rounded-full cursor-pointer hover:bg-orange-50 hover:border-orange-200 hover:text-orange-500 transition shadow-sm">
                                    <LogIn className="w-4 h-4" />
                                    ë¡œê·¸ì¸ | íšŒì›ê°€ì…
                                </div>
                            )}
                        </div>
                    </header>

                    <main className="w-full max-w-6xl flex-1 flex flex-col md:flex-row gap-6 p-4">
                        <aside className="w-full md:w-1/4 space-y-4">
                            <RankingBox icon={<Smile className="w-5 h-5 text-orange-400" />} title="ê°€ì¡± ì—¬í–‰ ì¸ê¸° TOP" data={WEEKLY_RANKING_DATA.family} />
                            <RankingBox icon={<Heart className="w-5 h-5 text-rose-400" />} title="ì»¤í”Œ ì—¬í–‰ ì¸ê¸° TOP" data={WEEKLY_RANKING_DATA.couple} />
                            <RankingBox icon={<Briefcase className="w-5 h-5 text-blue-400" />} title="ë‚˜í˜¼ì ì—¬í–‰ TOP" data={WEEKLY_RANKING_DATA.solo} />
                        </aside>

                        <section className="flex-1 min-h-[600px] bg-white rounded-[24px] border border-[#F0E6D8] p-8 relative soft-shadow">
                            {currentPage !== 'home' && (
                                <button onClick={() => setCurrentPage('home')} className="absolute top-6 left-6 flex items-center text-[#999] hover:text-[#555] text-lg transition z-10 font-medium">
                                    <ArrowLeft className="w-5 h-5 mr-1" /> ëŒì•„ê°€ê¸°
                                </button>
                            )}
                            {currentPage === 'home' && <HomeMenu setPage={setCurrentPage} />}
                            {currentPage === 'calc' && <CostCalculator />}
                            {currentPage === 'budget' && <BudgetRecommender />}
                            {currentPage === 'mbti' && <MbtiAnalyzer />}
                            {currentPage === 'search' && <RealTimeSearch />}
                        </section>

                        <aside className="w-full md:w-1/4 flex flex-col gap-4 h-full">
                            <div onClick={() => setIsAdModalOpen(true)} className="bg-gradient-to-r from-orange-400 to-pink-500 text-white p-4 rounded-2xl soft-shadow cursor-pointer hover:scale-105 transition btn-press flex items-center gap-3 relative overflow-hidden">
                                <div className="bg-white/20 p-2 rounded-full"><PlayCircle className="w-6 h-6 text-white" /></div>
                                <div><div className="font-bold text-lg">ê´‘ê³  ë³´ê³  300P</div><div className="text-xs text-orange-100 flex items-center gap-1"><Gift className="w-3 h-3"/> ì¦‰ì‹œ ì ë¦½í•´ë“œë ¤ìš”!</div></div>
                                <div className="absolute -right-2 -bottom-2 w-16 h-16 bg-white/10 rounded-full blur-xl"></div>
                            </div>
                            <ReviewBoard userPoints={userPoints} setUserPoints={setUserPoints} user={user} openLogin={() => setIsLoginModalOpen(true)} />
                        </aside>
                    </main>
                    
                    <footer className="w-full text-center p-8 text-[#CCC] text-sm font-light">Â© 2025 YEOJA. Your Travel Mate.</footer>
                </div>
            );
        }

        // --- ì„œë¸Œ ì»´í¬ë„ŒíŠ¸ë“¤ ---
        function AdModal({ onClose, onReward }) {
            const [timeLeft, setTimeLeft] = useState(3);
            const [canClose, setCanClose] = useState(false);

            useEffect(() => {
                if (timeLeft > 0) {
                    const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
                    return () => clearTimeout(timer);
                } else {
                    setCanClose(true);
                }
            }, [timeLeft]);

            const handleReward = () => {
                alert("ğŸ‰ ê´‘ê³  ì‹œì²­ ì™„ë£Œ!\n300 í¬ì¸íŠ¸ê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.");
                onReward();
            };

            return (
                <div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
                    <div className="bg-white w-full max-w-sm rounded-[2rem] p-6 text-center relative animate-pop">
                        {!canClose && <div className="absolute top-4 right-4 text-xs bg-gray-200 px-2 py-1 rounded text-gray-500">ë‚¨ì€ ì‹œê°„: {timeLeft}ì´ˆ</div>}
                        <div className="w-full h-48 bg-gray-900 rounded-xl mb-6 flex flex-col items-center justify-center text-white relative overflow-hidden">
                            <div className="absolute inset-0 bg-gradient-to-br from-purple-500 to-indigo-600 opacity-50"></div>
                            <PlayCircle className="w-12 h-12 mb-2 z-10" />
                            <p className="z-10 font-bold">íŠ¹ê°€ í•­ê³µê¶Œ ê´‘ê³  ì¬ìƒ ì¤‘...</p>
                            <div className="w-full bg-gray-700 h-1 absolute bottom-0 left-0"><div className="bg-orange-500 h-full transition-all duration-1000 ease-linear" style={{ width: `${(3 - timeLeft) * 33.3}%` }}></div></div>
                        </div>
                        <h3 className="text-xl font-bold text-[#444] mb-2">í¬ì¸íŠ¸ë¥¼ ì ë¦½ ì¤‘ì…ë‹ˆë‹¤!</h3>
                        {canClose ? <button onClick={handleReward} className="w-full bg-orange-500 text-white py-3 rounded-xl font-bold text-lg hover:bg-orange-600 transition shadow-md animate-bounce">ğŸ’° 300P ë°›ê¸° (ë‹«ê¸°)</button> : <button disabled className="w-full bg-gray-200 text-gray-400 py-3 rounded-xl font-bold cursor-not-allowed">ì‹œì²­ ì¤‘... ({timeLeft})</button>}
                    </div>
                </div>
            );
        }

        function LoginModal({ onClose, onLogin }) {
            const [view, setView] = useState('login');
            const [loginForm, setLoginForm] = useState({ id: '', password: '' });
            const [signupForm, setSignupForm] = useState({ name: '', gender: 'female', birth: '', phone: '', email: '', id: '', password: '' });
            const [idCheckStatus, setIdCheckStatus] = useState('none');
            const [nameError, setNameError] = useState('');

            const getRegisteredUsers = () => { const users = localStorage.getItem('yeoja_users'); return users ? JSON.parse(users) : []; };
            const containsBannedWords = (text) => BANNED_WORDS.some(word => text.includes(word));

            const handleIdCheck = () => {
                const { id } = signupForm;
                if (!id) { alert('ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
                if (containsBannedWords(id)) { setIdCheckStatus('banned'); return; }
                const registeredUsers = getRegisteredUsers();
                const isDuplicate = registeredUsers.some(u => u.id === id) || ['admin', 'test'].includes(id);
                setIdCheckStatus('checking');
                setTimeout(() => { if (isDuplicate) setIdCheckStatus('duplicate'); else setIdCheckStatus('available'); }, 300);
            };

            const handleSignupSubmit = () => {
                if (!signupForm.name || !signupForm.id || !signupForm.password || !signupForm.phone) { alert('ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
                if (containsBannedWords(signupForm.name)) { setNameError('ğŸš« ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ì´ë¦„(ë‹‰ë„¤ì„)ì…ë‹ˆë‹¤.'); return; } else { setNameError(''); }
                if (idCheckStatus !== 'available') { alert('ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ì„ í•´ì£¼ì„¸ìš”.'); return; }
                const registeredUsers = getRegisteredUsers();
                registeredUsers.push({ ...signupForm });
                localStorage.setItem('yeoja_users', JSON.stringify(registeredUsers));
                alert('ğŸ‰ íšŒì›ê°€ì… ì„±ê³µ! ì´ì œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                setView('login');
            };

            const handleLoginSubmit = () => {
                if (!loginForm.id || !loginForm.password) { alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
                const registeredUsers = getRegisteredUsers();
                const foundUser = registeredUsers.find(u => u.id === loginForm.id && u.password === loginForm.password);
                if (foundUser) { onLogin({ name: foundUser.name, id: foundUser.id }); } else { alert('ğŸš« ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n(íšŒì›ê°€ì…ì„ ë¨¼ì € í•´ì£¼ì„¸ìš”!)'); }
            };

            return (
                <div className="fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4">
                    <div className="bg-white p-8 rounded-[2rem] w-full max-w-sm soft-shadow animate-pop relative max-h-[90vh] overflow-y-auto scrollbar-hide">
                        <button onClick={onClose} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><X className="w-6 h-6" /></button>
                        {view === 'login' ? (
                            <div className="text-center">
                                <h2 className="text-2xl text-[#444] mb-2 font-bold">ë¡œê·¸ì¸</h2>
                                <p className="text-[#999] mb-8 text-sm">ë°˜ê°€ì›Œìš”! ì˜¤ëŠ˜ë„ ë– ë‚˜ë³¼ê¹Œìš”?</p>
                                <div className="space-y-3">
                                    <input type="text" placeholder="ì•„ì´ë””" className="input-base" value={loginForm.id} onChange={(e) => setLoginForm({...loginForm, id: e.target.value})} />
                                    <input type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" className="input-base" value={loginForm.password} onChange={(e) => setLoginForm({...loginForm, password: e.target.value})} />
                                    <button onClick={handleLoginSubmit} className="w-full bg-orange-400 text-white py-4 rounded-xl text-lg hover:bg-orange-500 transition shadow-md btn-press mt-2 font-bold">ë¡œê·¸ì¸</button>
                                </div>
                                <div className="mt-8 pt-6 border-t border-[#F5F5F5]"><p className="text-xs text-[#AAA] mb-2">ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?</p><button onClick={() => setView('signup')} className="text-orange-500 font-bold hover:underline text-sm">3ì´ˆ ë§Œì— íšŒì›ê°€ì… í•˜ëŸ¬ê°€ê¸° ğŸ‘‰</button></div>
                            </div>
                        ) : (
                            <div>
                                <div className="flex items-center gap-2 mb-6"><button onClick={() => setView('login')} className="p-1 hover:bg-gray-100 rounded-full"><ArrowLeft className="w-5 h-5 text-gray-500" /></button><h2 className="text-2xl text-[#444] font-bold">íšŒì›ê°€ì…</h2></div>
                                <div className="space-y-4">
                                    <div><label className="block text-xs text-gray-500 mb-1 ml-1">ì´ë¦„ (ë‹‰ë„¤ì„)</label><input type="text" className="input-base" value={signupForm.name} onChange={(e) => { setSignupForm({...signupForm, name: e.target.value}); if(nameError) setNameError(''); }} />{nameError && <p className="text-red-500 text-xs mt-1 ml-1">{nameError}</p>}</div>
                                    <div><label className="block text-xs text-gray-500 mb-1 ml-1">ì•„ì´ë””</label><div className="flex gap-2"><input type="text" className="input-base flex-1" value={signupForm.id} onChange={(e) => { setSignupForm({...signupForm, id: e.target.value}); setIdCheckStatus('none'); }} /><button onClick={handleIdCheck} className="bg-gray-100 text-gray-600 px-4 rounded-xl text-xs font-bold hover:bg-gray-200 transition whitespace-nowrap">ì¤‘ë³µí™•ì¸</button></div>{idCheckStatus === 'available' && <p className="text-green-500 text-xs mt-1 ml-1">ì‚¬ìš© ê°€ëŠ¥!</p>}{idCheckStatus === 'duplicate' && <p className="text-red-500 text-xs mt-1 ml-1">ì´ë¯¸ ìˆì–´ìš”!</p>}</div>
                                    <div><label className="block text-xs text-gray-500 mb-1 ml-1">ë¹„ë°€ë²ˆí˜¸</label><input type="password" className="input-base" value={signupForm.password} onChange={(e) => setSignupForm({...signupForm, password: e.target.value})} /></div>
                                    <div><label className="block text-xs text-gray-500 mb-1 ml-1">ì—°ë½ì²˜</label><input type="tel" className="input-base" value={signupForm.phone} onChange={(e) => setSignupForm({...signupForm, phone: e.target.value})} /></div>
                                    <button onClick={handleSignupSubmit} className="w-full bg-orange-400 text-white py-4 rounded-xl text-lg hover:bg-orange-500 transition shadow-md btn-press mt-4 font-bold">ê°€ì…ì™„ë£Œ</button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // --- ê¸°íƒ€ ì»´í¬ë„ŒíŠ¸ë“¤ ---
        function RankingBox({ icon, title, data }) {
            return (
                <div className="bg-white p-5 rounded-[20px] border border-[#F0E6D8] soft-shadow hover:border-orange-200 transition duration-300">
                    <h3 className="text-md mb-4 flex items-center gap-2 text-[#555] font-medium border-b border-[#F5F5F5] pb-3">{icon} {title}</h3>
                    <ol className="space-y-3">
                        {data.map((item, idx) => (
                            <li key={idx} className="flex justify-between items-center group cursor-pointer"><div className="flex items-center gap-3"><span className={`flex items-center justify-center w-5 h-5 rounded-full text-[10px] font-bold text-white ${idx === 0 ? 'bg-orange-400' : 'bg-[#DDD]'}`}>{idx + 1}</span><span className="text-[#666] group-hover:text-orange-500 transition">{item.name}</span></div><span className="text-[10px] text-[#BBB] bg-[#F9F9F9] px-2 py-0.5 rounded-md">{item.tag}</span></li>
                        ))}
                    </ol>
                </div>
            );
        }

        function HomeMenu({ setPage }) {
            const menus = [
                { id: 'calc', title: 'ì—¬í–‰ ê²¬ì  ê³„ì‚°ê¸°', sub: 'ì–¼ë§ˆë‚˜ í•„ìš”í• ê¹Œ?', icon: <Calculator className="w-7 h-7" /> },
                { id: 'budget', title: 'ì˜ˆì‚° ë§ì¶¤ ì—¬í–‰ì§€', sub: 'ë‚´ ëˆìœ¼ë¡œ ì–´ë””ê¹Œì§€?', icon: <Sparkles className="w-7 h-7" /> },
                { id: 'mbti', title: 'ì—¬í–‰ ì„±í–¥ í…ŒìŠ¤íŠ¸', sub: 'ë‚˜ë‘ ì°°ë–¡ì¸ ê³³ì€?', icon: <User className="w-7 h-7" /> },
                { id: 'search', title: 'ìµœì €ê°€ ê²€ìƒ‰', sub: 'íŠ¹ê°€ ì¤ì¤í•˜ê¸°', icon: <Search className="w-7 h-7" /> },
            ];
            return <div className="flex flex-col gap-4 h-full justify-center px-6"><div className="text-center mb-6"><h2 className="text-2xl text-[#444] mb-2">ì–´ë””ë¡œ ë– ë‚˜ì‹œë‚˜ìš”? âœˆï¸</h2><p className="text-[#999] font-light">í•„ìš”í•œ ê¸°ëŠ¥ì„ ì„ íƒí•´ë³´ì„¸ìš”</p></div><div className="grid grid-cols-1 md:grid-cols-2 gap-4">{menus.map((menu) => (<button key={menu.id} onClick={() => setPage(menu.id)} className="bg-[#FAFAFA] p-6 rounded-[24px] border border-transparent hover:border-orange-200 hover:bg-orange-50/30 flex flex-col items-center justify-center gap-3 transition-all duration-300 group btn-press"><div className="bg-white p-4 rounded-2xl shadow-sm text-[#888] group-hover:text-orange-500 group-hover:scale-110 transition duration-300">{menu.icon}</div><div className="text-center"><h3 className="text-lg text-[#555] mb-1">{menu.title}</h3><p className="text-xs text-[#AAA]">{menu.sub}</p></div></button>))}</div></div>;
        }

        function CostCalculator() {
            const [city, setCity] = useState('bali');
            const [days, setDays] = useState(30);
            const [style, setStyle] = useState(1);
            const [accom, setAccom] = useState('hostel');
            const [result, setResult] = useState(null);
            
            const calculate = () => {
                const data = CITIES_DB[city];
                const total = data.flight + (data[accom] * days) + ((data.food * 3 + data.coffee) * days * style) + 10000 * days;
                setResult({ total, breakdown: { flight: data.flight, stay: data[accom] * days, food: (data.food * 3) * days * style, etc: 10000 * days } });
            };

            return (
                <div className="max-w-md mx-auto mt-2">
                    <h2 className="text-xl mb-6 text-center text-[#555]">ğŸ§® ì—¬í–‰ ê²¬ì  ê³„ì‚°ê¸°</h2>
                    {!result ? (
                        <div className="space-y-6 px-4">
                            <div className="space-y-2"><label className="text-sm text-[#888]">ë– ë‚  ë„ì‹œ</label><select className="w-full p-3 rounded-xl border border-[#EEE] bg-[#FAFAFA]" value={city} onChange={(e) => setCity(e.target.value)}>{Object.keys(CITIES_DB).map(key => <option key={key} value={key}>{CITIES_DB[key].name}</option>)}</select></div>
                            <div className="space-y-2"><label className="text-sm text-[#888]">ì—¬í–‰ ê¸°ê°„ (ì¼)</label><input type="number" className="w-full p-3 rounded-xl border border-[#EEE] bg-[#FAFAFA] text-center" value={days} onChange={(e) => setDays(Number(e.target.value))} /></div>
                            <button onClick={calculate} className="w-full bg-[#444] text-white py-4 rounded-xl text-lg hover:bg-[#333] transition shadow-md btn-press mt-4">ê³„ì‚°í•˜ê¸°</button>
                        </div>
                    ) : (
                        <div className="bg-[#FAFAFA] p-6 rounded-3xl border border-[#EEE] text-center">
                            <h3 className="text-lg text-[#666]">{CITIES_DB[city].name} {days}ì¼ ì‚´ê¸°</h3>
                            <div className="text-3xl text-[#444] mt-2 font-bold">{result.total.toLocaleString()}ì›</div>
                            <button onClick={() => setResult(null)} className="w-full mt-6 bg-white border border-[#DDD] text-[#666] py-3 rounded-xl hover:bg-[#F5F5F5] transition text-sm">ë‹¤ì‹œ ê³„ì‚°í•˜ê¸°</button>
                        </div>
                    )}
                </div>
            );
        }

        function BudgetRecommender() {
             const [budget, setBudget] = useState(2000000);
             const recommendations = Object.keys(CITIES_DB).filter(key => (CITIES_DB[key].flight + CITIES_DB[key].airbnb * 7 + CITIES_DB[key].food * 14) <= budget);
             return <div className="max-w-md mx-auto mt-4 px-4"><h2 className="text-xl mb-6 text-center text-[#555]">ğŸ’° ì˜ˆì‚° ë§ì¶¤ ì¶”ì²œ</h2><div className="bg-[#FAFAFA] p-6 rounded-3xl border border-[#EEE] text-center mb-6"><div className="text-2xl text-orange-500 font-bold mb-4">{budget.toLocaleString()}ì›</div><input type="range" min="500000" max="5000000" step="100000" value={budget} onChange={(e) => setBudget(Number(e.target.value))} className="w-full accent-orange-400 h-2 bg-[#E0E0E0] rounded-lg appearance-none cursor-pointer" /></div><div className="space-y-3">{recommendations.map(key => <div key={key} className="flex justify-between p-4 bg-white border border-[#EEE] rounded-2xl"><span>{CITIES_DB[key].name}</span><span className="text-orange-500 font-bold">ê°€ëŠ¥</span></div>)}</div></div>;
        }

        function MbtiAnalyzer() {
            const [step, setStep] = useState(0); 
            const [answers, setAnswers] = useState({});
            const startTest = () => setStep(1);
            const handleAnswer = (val) => { const next = { ...answers, [`q${step}`]: val }; setAnswers(next); if (step < 3) setStep(step + 1); else setStep(4); };
            const getResult = () => { const { q1, q3 } = answers; if(q1 === 'A' && q3 === 'A') return 'emotional'; return 'foodie'; }; 
            const handleShare = () => { navigator.clipboard.writeText("ì—¬í–‰ ì„¸í¬ í…ŒìŠ¤íŠ¸ í•´ë³´ì„¸ìš”! https://yeoja.travel").then(() => alert("ë³µì‚¬ ì™„ë£Œ!")); };

            if(step === 0) return <div className="text-center py-10"><div className="text-5xl mb-6">ğŸ§ </div><button onClick={startTest} className="w-full bg-orange-400 text-white py-4 rounded-2xl text-lg font-bold">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button></div>;
            if(step <= 3) return <div className="px-2"><div className="text-center mb-8"><span className="bg-orange-100 text-orange-500 px-4 py-1 rounded-full">Q{step}</span></div><div className="space-y-4"><button onClick={() => handleAnswer('A')} className="w-full p-5 bg-[#FAFAFA] border rounded-2xl text-left">A. ì„ íƒì§€ 1</button><button onClick={() => handleAnswer('B')} className="w-full p-5 bg-[#FAFAFA] border rounded-2xl text-left">B. ì„ íƒì§€ 2</button></div></div>;
            return <div className="bg-white p-8 rounded-[30px] border border-[#EEE] text-center"><h2 className="text-2xl mb-4">{TRAVEL_TYPES[getResult()].title}</h2><p className="mb-8">{TRAVEL_TYPES[getResult()].desc}</p><button onClick={handleShare} className="w-full bg-orange-400 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2"><Share2 className="w-4 h-4" /> ê³µìœ í•˜ê¸°</button><button onClick={() => setStep(0)} className="w-full mt-3 bg-gray-100 py-3 rounded-xl">ë‹¤ì‹œí•˜ê¸°</button></div>;
        }

        function RealTimeSearch() {
            return <div className="max-w-md mx-auto mt-2 h-full px-4"><h2 className="text-xl mb-6 text-center text-[#555]">ğŸ”¥ ì˜¤ëŠ˜ì˜ íŠ¹ê°€</h2><div className="space-y-4"><div onClick={() => window.open('https://www.agoda.com', '_blank')} className="bg-white p-5 rounded-2xl border border-[#EEE] shadow-sm flex justify-between items-center cursor-pointer hover:border-orange-200"><div><span className="text-sky-500 bg-sky-50 px-2 py-0.5 rounded text-xs">í•­ê³µ</span><div className="font-bold mt-1">ì¸ì²œ â†” í›„ì¿ ì˜¤ì¹´</div></div><div className="font-bold text-lg">189,000ì›</div></div></div></div>;
        }

        function ReviewBoard({ userPoints, setUserPoints, user, openLogin }) {
             const [reviews, setReviews] = useState(() => { const s = localStorage.getItem('yeoja_reviews'); return s ? JSON.parse(s) : [{id:1, user:'ì—¬í–‰ì¡°ì•„', content:'ì¶”ì²œí•´ìš”!', city:'ë°œë¦¬'}]; });
             const [text, setText] = useState('');
             useEffect(() => localStorage.setItem('yeoja_reviews', JSON.stringify(reviews)), [reviews]);
             const handleSubmit = (e) => { e.preventDefault(); if(!user) return openLogin(); if(!text) return; setReviews([{id:Date.now(), user:user.name, content:text, city:'ì—¬í–‰ì¤‘'}, ...reviews]); setText(''); setUserPoints(p => p+300); alert('300P ì ë¦½!'); };
             return <div className="bg-white rounded-[24px] border border-[#F0E6D8] p-5 h-[500px] flex flex-col"><div className="mb-4 font-bold border-b pb-2">ğŸ’¬ ë…¸ë§ˆë“œ í†¡</div><div className="flex-1 overflow-y-auto space-y-3 mb-4">{reviews.map(r => <div key={r.id} className="bg-[#FAFAFA] p-3 rounded-xl"><span className="font-bold text-xs">{r.user}</span><p className="text-sm">{r.content}</p></div>)}</div><form onSubmit={handleSubmit} className="relative"><input value={text} onChange={e=>setText(e.target.value)} className="w-full p-3 bg-[#FAFAFA] rounded-xl outline-none" placeholder={user?"ë¦¬ë·°ì‘ì„±":"ë¡œê·¸ì¸í•„ìš”"} disabled={!user}/><button className="absolute right-3 top-3 text-orange-400"><Send className="w-4 h-4"/></button></form></div>;
        }

        // ì•± ë Œë”ë§
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
